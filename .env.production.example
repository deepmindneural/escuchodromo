# ================================
# CONFIGURACIÓN DE PRODUCCIÓN - ESCUCHODROMO
# ================================
# Copia este archivo como .env.production y configura los valores reales

# Configuración del entorno
NODE_ENV=production
PORT=3333

# ================================
# BASE DE DATOS
# ================================
# PostgreSQL para producción (obligatorio cambiar)
DATABASE_URL="postgresql://user:password@hostname:5432/escuchodromo?schema=public&sslmode=require"

# ================================
# SEGURIDAD Y AUTENTICACIÓN
# ================================
# IMPORTANTE: CAMBIAR ESTAS CLAVES EN PRODUCCIÓN
JWT_SECRET="tu-clave-jwt-super-segura-cambiar-ahora-minimo-32-caracteres"
NEXTAUTH_SECRET="tu-clave-nextauth-super-segura-cambiar-ahora-minimo-32-caracteres"
SESSION_SECRET="tu-clave-sesion-super-segura-cambiar-ahora-minimo-32-caracteres"

# URLs de producción
NEXTAUTH_URL="https://escuchodromo.com"
FRONTEND_URL="https://escuchodromo.com"
NEXT_PUBLIC_API_URL="https://api.escuchodromo.com"

# ================================
# SERVICIOS DE PAGO
# ================================
# Stripe (Producción)
STRIPE_PUBLISHABLE_KEY="pk_live_..."
STRIPE_SECRET_KEY="sk_live_..."
STRIPE_WEBHOOK_SECRET="whsec_..."

# PayPal (Producción)
PAYPAL_CLIENT_ID="production_client_id_here"
PAYPAL_CLIENT_SECRET="production_client_secret_here"
PAYPAL_WEBHOOK_ID="webhook_id_here"
PAYPAL_MODE="production"

# ================================
# SERVICIOS DE NOTIFICACIONES
# ================================
# SendGrid para emails
SENDGRID_API_KEY="SG.your_sendgrid_api_key_here"
SENDGRID_FROM_EMAIL="noreply@escuchodromo.com"
SENDGRID_FROM_NAME="Escuchodromo"
SENDGRID_TEMPLATE_WELCOME="d-template_id_here"
SENDGRID_TEMPLATE_ALERT="d-template_id_here"
SENDGRID_TEMPLATE_RESET_PASSWORD="d-template_id_here"

# Twilio para SMS
TWILIO_ACCOUNT_SID="ACyour_account_sid_here"
TWILIO_AUTH_TOKEN="your_auth_token_here"
TWILIO_PHONE_NUMBER="+1234567890"
TWILIO_VERIFY_SERVICE_SID="VAyour_verify_service_here"

# Firebase para push notifications
FIREBASE_SERVER_KEY="your_firebase_server_key_here"
FIREBASE_PROJECT_ID="escuchodromo"
FIREBASE_VAPID_KEY="your_vapid_key_here"

# ================================
# SERVICIOS DE IA Y VOZ
# ================================
# OpenAI para procesamiento de lenguaje natural
OPENAI_API_KEY="sk-your_openai_api_key_here"
OPENAI_MODEL="gpt-4-turbo"
OPENAI_MAX_TOKENS="1000"
OPENAI_TEMPERATURE="0.7"

# Azure Speech Services para reconocimiento y síntesis de voz
AZURE_SPEECH_KEY="your_azure_speech_key_here"
AZURE_SPEECH_REGION="eastus"
AZURE_SPEECH_RESOURCE_ID="your_resource_id_here"

# Análisis de sentimientos adicional (opcional)
AZURE_TEXT_ANALYTICS_KEY="your_text_analytics_key_here"
AZURE_TEXT_ANALYTICS_ENDPOINT="https://your-endpoint.cognitiveservices.azure.com/"

# ================================
# MONITOREO Y LOGGING
# ================================
# Sentry para tracking de errores
SENTRY_DSN="https://your_sentry_dsn_here@sentry.io/project_id"
SENTRY_ENVIRONMENT="production"
SENTRY_SAMPLE_RATE="0.1"

# New Relic para monitoreo de performance
NEW_RELIC_LICENSE_KEY="your_new_relic_license_key_here"
NEW_RELIC_APP_NAME="Escuchodromo API"

# Logs
LOG_LEVEL="warn"
LOG_FILE="/var/log/escuchodromo/app.log"
ERROR_LOG_FILE="/var/log/escuchodromo/error.log"

# ================================
# RATE LIMITING Y SEGURIDAD
# ================================
# Rate limiting global
RATE_LIMIT_WINDOW_MS="900000"  # 15 minutes
RATE_LIMIT_MAX_REQUESTS="100"  # requests per window

# Rate limiting específico para APIs críticas
RATE_LIMIT_AUTH_MAX="5"        # login attempts per window
RATE_LIMIT_CHAT_MAX="50"       # chat messages per window
RATE_LIMIT_EVAL_MAX="10"       # evaluations per window

# Configuración de cookies
COOKIE_SECURE="true"
COOKIE_SAME_SITE="strict"
COOKIE_MAX_AGE="86400000"      # 24 hours

# CORS
CORS_ORIGIN="https://escuchodromo.com"
CORS_CREDENTIALS="true"

# ================================
# CACHE Y PERFORMANCE
# ================================
# Redis para cache y sesiones
REDIS_URL="redis://user:password@hostname:6379"
REDIS_TTL="3600"               # 1 hour default TTL
REDIS_MAX_CONNECTIONS="10"

# Cache de aplicación
CACHE_ENABLED="true"
CACHE_TTL_CONVERSATIONS="1800" # 30 minutes
CACHE_TTL_EVALUATIONS="3600"   # 1 hour
CACHE_TTL_RECOMMENDATIONS="7200" # 2 hours

# ================================
# ALMACENAMIENTO DE ARCHIVOS
# ================================
# AWS S3 para archivos y backups
AWS_ACCESS_KEY_ID="your_aws_access_key_here"
AWS_SECRET_ACCESS_KEY="your_aws_secret_key_here"
AWS_REGION="us-east-1"
AWS_S3_BUCKET="escuchodromo-files"
AWS_S3_BUCKET_BACKUPS="escuchodromo-backups"

# CloudFront para CDN (opcional)
CLOUDFRONT_DOMAIN="cdn.escuchodromo.com"

# ================================
# HEALTH CHECKS Y MONITORING
# ================================
# Token para health checks internos
HEALTH_CHECK_TOKEN="your_health_check_token_here"
HEALTH_CHECK_INTERVAL="30000"  # 30 seconds

# Endpoints externos de monitoreo
UPTIME_ROBOT_KEY="your_uptime_robot_key_here"
PINGDOM_CHECK_ID="your_pingdom_check_id_here"

# ================================
# INTEGRACIONES ADICIONALES
# ================================
# Webhooks para integraciones externas
WEBHOOK_SECRET="your_webhook_secret_here"
WEBHOOK_TIMEOUT="5000"         # 5 seconds

# APIs de terceros para contenido
CONTENT_API_KEY="your_content_api_key_here"
WEATHER_API_KEY="your_weather_api_key_here"

# ================================
# CONFIGURACIÓN DE BACKUP
# ================================
# Backup automático de base de datos
BACKUP_ENABLED="true"
BACKUP_SCHEDULE="0 2 * * *"    # Daily at 2 AM
BACKUP_RETENTION_DAYS="30"
BACKUP_S3_BUCKET="escuchodromo-backups"

# ================================
# CONFIGURACIÓN DE SSL/TLS
# ================================
# Certificados SSL
SSL_CERT_PATH="/etc/ssl/certs/escuchodromo.crt"
SSL_KEY_PATH="/etc/ssl/private/escuchodromo.key"
SSL_CA_PATH="/etc/ssl/certs/ca-certificates.crt"

# ================================
# CONFIGURACIÓN DE EMAIL ADICIONAL
# ================================
# Configuración SMTP alternativa (si no usas SendGrid)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="noreply@escuchodromo.com"
SMTP_PASS="your_smtp_password_here"
SMTP_SECURE="true"

# ================================
# CONFIGURACIÓN ESPECÍFICA DE PRODUCCIÓN
# ================================
# Límites de recursos
MAX_CONCURRENT_CONNECTIONS="1000"
MAX_REQUEST_SIZE="10mb"
MAX_FILE_UPLOAD_SIZE="5mb"

# Timeouts
REQUEST_TIMEOUT="30000"        # 30 seconds
DATABASE_TIMEOUT="10000"       # 10 seconds
EXTERNAL_API_TIMEOUT="15000"   # 15 seconds

# Configuración de workers (para PM2 o similar)
WORKER_PROCESSES="max"         # Use all CPU cores
WORKER_MAX_MEMORY="512M"       # Restart worker if exceeds 512MB